# Reused objects
Connectors: &Connectors
  AirLoop: &ConnectorsAirLoop
    Inlet: air_inlet_node_name
    Outlet: air_outlet_node_name
  WaterLoop: &ConnectorsWaterLoop
    Inlet: water_inlet_node_name
    Outlet: water_outlet_node_name

# Schedule Objects
Schedule:
  Compact:
    ALWAYS_VAL:
      name: 'HVACTemplate-Always{}'
      schedule_type_limits_name: Any Number
      data:
        - field: Through 12/31
        - field: For AllDays
        - field: Until 24:00
        - field: '{:.1f}'

# Base objects
Coil:
  Cooling:
    Water:
      Fields: &CoilCoolingFields
        name: '{} Cooling Coil'
        air_inlet_node_name: '{} Cooling Coil Inlet'
        air_outlet_node_name: '{} Cooling Coil Outlet'
        water_inlet_node_name: '{} Cooling Coil Chw Inlet'
        water_outlet_node_name: '{} Cooling Coil Chw Outlet'
        design_water_flow_rate: Autosize
      Connectors: &CoilCoolingConnectors
        AirLoop: *ConnectorsAirLoop
        ChilledWaterLoop: *ConnectorsWaterLoop
      DetailedGeometry:
        Fields:
          << : *CoilCoolingFields
        Connectors:
          << : *CoilCoolingConnectors
  Heating:
    Fields: &CoilHeatingFields
      name: '{} Heating Coil'
      air_inlet_node_name: '{} Heating Coil Inlet'
      air_outlet_node_name: '{} Heating Coil Outlet'
    Connectors:
      AirLoop: *ConnectorsAirLoop
    Water:
      Fields: &CoilHeatingWaterFields
        << : *CoilHeatingFields
        water_inlet_node_name: '{} Heating Coil Hw Inlet'
        water_outlet_node_name: '{} Heating Coil Hw Outlet'
        rated_inlet_air_temperature: 16.6 # todo_eo error messages without these fields
        rated_inlet_water_temperature: 82.2
        rated_outlet_air_temperature: 32.2
        rated_outlet_water_temperature: 71.1
        rated_ratio_for_air_and_water_convection: 0.5
        u_factor_times_area_value: Autosize
        performance_input_method: UFactorTimesAreaAndDesignWaterFlowRate
        rated_capacity: Autosize
        maximum_water_flow_rate: Autosize
      Connectors:
        AirLoop: *ConnectorsAirLoop
        HotWaterLoop: *ConnectorsWaterLoop

Fan:
  Fields: &FanFields
    motor_efficiency: 0.9
    maximum_flow_rate: Autosize
  Connectors: &FanConnectors
    Air: *ConnectorsAirLoop
  VariableVolume:
    Base:
      Fields:
        name: '{} Supply Fan'
        << : *FanFields
        air_inlet_node_name: '{} Supply Fan Inlet'
        air_outlet_node_name: '{} Supply Fan Outlet'
        fan_power_coefficient_1: 0.35071223
        fan_power_coefficient_2: 0.30850535
        fan_power_coefficient_3: -0.54137364
        fan_power_coefficient_4: 0.87198823
        fan_power_coefficient_5: 0
        fan_power_minimum_flow_fraction: 0.25
        fan_power_minimum_flow_rate_input_method: "Fraction"
        fan_total_efficiency: 0.7
      Connectors:
        << : *FanConnectors

# Zone Equipment
AirTerminal:
  SingleDuct:
    Fields: &AirTerminalSingleDuctFields
      maximum_air_flow_rate: Autosize
      air_inlet_node_name: '{} Zone Equip Inlet'
      air_outlet_node_name: '{} Supply Inlet'
    VAV:
      Reheat: &AirTerminalSingleDuctVAVReheat
        - AirTerminal:SingleDuct:VAV:Reheat:
          name: '{} VAV Reheat'
          <<: *AirTerminalSingleDuctFields
          damper_air_outlet_node_name: '{} Damper Outlet'
          damper_heating_action: Reverse
          reheat_coil_object_type: Coil:Heating:Water
          maximum_hot_water_or_steam_flow_rate: Autosize
          reheat_coil_name: '{} Reheat Coil'
        - Coil:Heating:Water:
          <<: *CoilHeatingWaterFields
          name: '{} Reheat Coil'
          air_inlet_node_name: '{} Damper Outlet'
          air_outlet_node_name: '{} Supply Inlet'

HVACTemplate:
  System:
    VAV:
      BuildPath:

OptionTree:
  Zone:
    VAV:
      BaseObjects:
        Objects:
          - ZoneHVAC:AirDistributionUnit:
            name: '{} ATU'
      TemplateObjects:
        reheat_coil_type:
          HotWater:
            Objects:
              - *AirTerminalSingleDuctVAVReheat
              - Branch:
                  name: '{} HW Branch'
            Transitions:
              supply_air_maximum_flow_rate:
                AirTerminal:.*: maximum_air_flow_rate
              damper_heating_action:
                AirTerminal:.*:VAV:Reheat: damper_heating_action
              zone_minimum_air_flow_input_method:
                AirTerminal:.*: zone_minimum_air_flow_input_method
  System:
    VAV:
      BuildPath:
        Objects:
        Transitions:
        InsertBuildPathObjects:
          - template_field:
              template_value:
                Objects:
                Transitions:
        ReplaceBuildPathObjects:
        RemoveBuildPathObjects:
      BaseObjects:
      TemplateObjects: